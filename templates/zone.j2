; {{ansible_managed}}
$TTL 3600	; 1 hour default TTL
{{item.zone}}.	IN	SOA	{{item.primary}}. {{item.admin}}. (
				{{item.serial}}
				{{item.refresh}}
				{{item.retry}}
				{{item.expire}}
				{{item.negative}}
			)

@		IN	A	{{item.zone_ip}}
{{item.primary}}.	IN	A	{{item.primary_ip}}

; Machine Names
{% for host in item.host %}
{{host.host}}		IN	A	{{host.ip}}
{% endfor %}

; Aliases
{% for alias in item.alias %}
{{alias}}		IN	CNAME	@
{% endfor %}

; Mail servers
{% for mx in item.mx %}
@		IN	MX {{mx.priority}}	{{mx.server}}.
{% endfor %}

; DNS Servers
{% for server in item.server %}
@		IN	NS	{{server}}.
{% endfor %}

; DNSSEC keys
$include {{bsd_named_conf_keys}}/K{{item.zone}}.KSK.key ; KSK
$include {{bsd_named_conf_keys}}/K{{item.zone}}.ZSK.key ; ZSK
